# 10	narr: shoot enemy during combat
# 20	char: witness a battle, choose what to do
# 40	char: companion offers weapons training

namespace = combat

narrative_event = {
	id = combat.10
	is_triggered_only = yes
	title = EVTNAME_combat_shoot
	desc = EVTDESC_combat_shoot
	picture = GFX_battle_headshot
	
	trigger = {
		trait = gunner
		NOT = { character = FROM }
		NOT = { is_liege_or_above = FROM }
	}
	
	option = {
		name = EVTOPT_combat_shoot_depressed
		trigger = { trait = depressed }
		tooltip_info = depressed
		piety = 20
		remove_trait = depressed
		add_trait = kind
		reverse_opinion = { modifier = spared_life who = FROM years = 25 }
	}
	
	option = {
		name = EVTOPT_combat_shoot_spare
		trigger = {
			trait = kind
			NOT = { trait = depressed }
		}
		tooltip_info = kind
		piety = 20
		reverse_opinion = { modifier = spared_life who = FROM years = 25 }
	}
	
	option = {
		name = EVTOPT_combat_shoot_spare
		trigger = {
			NOT = { trait = kind }
			NOT = { trait = depressed }
		}
		piety = 20
		random = { chance = 50 add_trait = kind }
		reverse_opinion = { modifier = spared_life who = FROM years = 25 }
	}
	
	option = {
		name = EVTOPT_combat_shoot_hunt
		trigger = { trait = hunter }
		tooltip_info = hunter
		prestige = 50
		random = { chance = 80 FROM = { death = { death_reason = death_battle killer = ROOT } } }
	}
	
	option = {
		name = EVTOPT_combat_shoot_impale
		trigger = { trait = impaler }
		tooltip_info = impaler
		prestige = 30
		piety = -5
		random_list = {
			25 = { FROM = { death = { death_reason = death_battle killer = ROOT } } }
			75 = { FROM = { add_trait = maimed } }
		}
	}
	
	option = {
		name = EVTOPT_combat_shoot_garden
		trigger = { trait = gardener }
		tooltip_info = gardener
		prestige = 25
		piety = 5
		random = { chance = 50 FROM = { death = { death_reason = death_battle killer = ROOT } } }
	}
	
	option = {
		name = EVTOPT_combat_shoot_gamer
		trigger = { trait = gamer }
		tooltip_info = gamer
		prestige = 30
		random = { chance = 50 FROM = { death = { death_reason = death_battle killer = ROOT } } }
	}
	
	option = {
		name = EVTOPT_combat_shoot_duel
		trigger = { trait = duelist }
		tooltip_info = duelist
		prestige = 50
		random = { chance = 75 FROM = { death = { death_reason = death_battle killer = ROOT } } }
	}
	
	option = {
		name = EVTOPT_combat_shoot_wroth
		trigger = { trait = wroth }
		tooltip_info = wroth
		prestige = 25
		random = { chance = 40 FROM = { death = { death_reason = death_battle killer = ROOT } } }
	}
	
	option = {
		name = EVTOPT_combat_shoot_patient
		trigger = { trait = patient }
		tooltip_info = patient
		prestige = 30
		random = { chance = 60 FROM = { death = { death_reason = death_battle killer = ROOT } } }
	}
	
	option = {
		name = EVTOPT_combat_shoot_norm
		trigger = {
			NOT = { trait = wroth }
			NOT = { trait = patient }
		}
		prestige = 25
		random = { chance = 40 FROM = { death = { death_reason = death_battle killer = ROOT } } }
	}
}

narrative_event = {
	id = combat.20
	title = EVTNAME_combat_witness
	desc = EVTDESC_combat_witness
	picture = GFX_evt_battle_byzantine
	
	is_triggered_only = yes
	trigger = { location = { any_province_character = { in_battle = yes } } }

	immediate = {
		change_variable = { which = "trav_combat_xp" value = 2 }
	}
	
	option = {
		name = EVTOPT_combat_witness_observe
		trigger = { has_character_modifier = no_battle_xp }
		remove_character_modifier = no_battle_xp
		hidden_tooltip = { change_variable = { which = "trav_combat_xp" value = 2 } }
	}
	
	option = {
		name = EVTOPT_combat_witness_observe
		trigger = {
			NOT = { has_character_modifier = no_battle_xp }
			has_character_modifier = no_logistics
			check_variable = { which = trav_combat_xp value = 8 }
		}
		remove_character_modifier = no_logistics
		hidden_tooltip = { change_variable = { which = "trav_combat_xp" value = 1 } }
	}
	
	option = {
		name = EVTOPT_combat_witness_help
	}
	
	option = {
		name = EVTOPT_combat_witness_profit
	}
	
	option = {
		name = EVTOPT_combat_witness_leave
	}
}





character_event = {
	id = combat.40
	title = EVTNAME_combat_training
	desc = EVTDESC_combat_training
	picture = GFX_evt_battle_byzantine
	
	is_triggered_only = yes
	
	immediate = {
		random_courtier = {
			limit = {
				has_character_flag = loyal_companion
				martial = 10
			}
			save_event_target_as = combat_trainer
		}
	}

	option = {
		name = EVTOPT_combat_training_yes
		wealth = -3
		random_list = {
			90 = { remove_character_modifier = no_wep_training }
			10 = { add_trait = wounded } 
		}
	}
	
	option = {
		name = EVTOPT_combat_training_gun
		trigger = { trait = gunner }
		tooltip_info = gunner
		prestige = 5
	}
	
	option = {
		name = EVTOPT_combat_training_no
		prestige = 5
	}
}






